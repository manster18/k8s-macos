# Kind multi-node cluster configuration
# This creates a cluster with 1 control-plane and 2 worker nodes

kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4

# Cluster name
name: k8s-dev

# Networking configuration
networking:
  # By default the API server listens on a random open port
  # You can specify a specific port if needed
  apiServerAddress: "127.0.0.1"
  apiServerPort: 6443
  
  # Pod subnet
  podSubnet: "10.244.0.0/16"
  
  # Service subnet
  serviceSubnet: "10.96.0.0/12"

# Node configuration
nodes:
  # Control plane node
  - role: control-plane
    # Port mappings for ingress
    extraPortMappings:
      - containerPort: 80
        hostPort: 80
        protocol: TCP
      - containerPort: 443
        hostPort: 443
        protocol: TCP
    # Mount local directories (optional)
    # extraMounts:
    #   - hostPath: /path/on/host
    #     containerPath: /path/in/node
    
  # Worker node 1
  - role: worker
    # Labels for this node
    labels:
      worker-type: standard
      
  # Worker node 2
  - role: worker
    labels:
      worker-type: standard

# Optional: Specify Kubernetes version
# kubeadmConfigPatches:
# - |
#   kind: ClusterConfiguration
#   apiServer:
#     extraArgs:
#       enable-admission-plugins: NodeRestriction,PodSecurityPolicy

